(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-285ca21e"],{"159b":function(t,e,s){var i=s("da84"),a=s("fdbc"),n=s("17c2"),r=s("9112");for(var l in a){var c=i[l],o=c&&c.prototype;if(o&&o.forEach!==n)try{r(o,"forEach",n)}catch(d){o.forEach=n}}},"17c2":function(t,e,s){"use strict";var i=s("b727").forEach,a=s("a640"),n=s("ae40"),r=a("forEach"),l=n("forEach");t.exports=r&&l?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,s){"use strict";var i=s("23e7"),a=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"43dd":function(t,e,s){"use strict";s("a410")},a410:function(t,e,s){},b3b1:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"profile"},[s("navigation"),s("div",{staticClass:"row grey darken-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"col s12 m10 offset-m1 hero white-text"},[s("div",{staticClass:"refresh valign-wrapper right grey lighten-3 black-text waves-effect waves-dark hide-on-small-only",on:{click:t.getListingsAndSales}},[t._m(0)]),s("div",{staticClass:"lead"},[s("span",[t._v(t._s(t.user.username)+",")]),s("p",[t._v("Welcome back to Zano.life")])]),s("div",{staticClass:"lead"},[s("span",[t._v("Account Information")]),s("div",{staticClass:"row accountInfo"},[s("div",{staticClass:"col s12 m6 data"},[s("b",[t._v("Email:")]),t._v(" "+t._s(t.user.email))]),s("div",{staticClass:"col s12 m6 data"},[s("b",[t._v("Confirmed?")]),t._v(" "+t._s(t.confirmationText))]),s("div",{staticClass:"col s12 data address"},[s("b",[t._v("Zano Address:")]),t._v(" "+t._s(t.user.paymentAddress))])])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 m6 hide-on-small-only",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[s("div",{staticClass:"col s12 m6"},[s("div",{staticClass:"card-panel light-blue white-text"},[s("div",{staticClass:"cardCount center-align",attrs:{id:"listing"}},[t._v(" Listed "),s("p",{attrs:{id:"listingCount"}},[t._v(t._s(t.listingCount))]),t._m(1)])])]),s("div",{staticClass:"col s12 m6"},[s("div",{staticClass:"card-panel light-blue white-text"},[s("div",{staticClass:"cardCount center-align"},[t._v(" Sales "),s("p",{attrs:{id:"saleCount"}},[t._v(t._s(t.salesCount))]),t._m(2)])])]),t._m(3)]),s("div",{staticClass:"col s12 m6",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[t._m(4),s("div",{staticClass:"col s12"},[s("div",{staticClass:"card-panel grey darken-4 white-text"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 accountDetail"},[t._v("Manage account")]),s("div",{staticClass:"col s12"},[t._v("View more information regarding sales and listings, purchases, or "),s("router-link",{attrs:{to:"/me/edit"}},[t._v("modify your account")]),t._v(". ")],1)]),t._m(5)])])])])])]),s("div",{staticClass:"modal",staticStyle:{width:"85%","max-width":"900px"},attrs:{id:"newListingModal"}},[s("div",{staticClass:"loading"}),t._m(6),s("form",{on:{submit:function(e){return e.preventDefault(),t.submitListing(e)}}},[s("div",{staticClass:"modal-content"},[t._m(7),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12 m6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newListing.title,expression:"newListing.title"}],staticClass:"validate",attrs:{id:"title",type:"text"},domProps:{value:t.newListing.title},on:{input:function(e){e.target.composing||t.$set(t.newListing,"title",e.target.value)}}}),s("label",{attrs:{for:"title"}},[t._v("Item title")])]),s("div",{staticClass:"input-field col s12 m6"},[s("i",{staticClass:"material-icons prefix",attrs:{for:"category"}},[t._v("textsms")]),s("div",{staticClass:"right-align",attrs:{id:"categoryHelp"}},[t._v("See options")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newListing.category,expression:"newListing.category"}],staticClass:"autocomplete",attrs:{type:"text",id:"category"},domProps:{value:t.newListing.category},on:{input:function(e){e.target.composing||t.$set(t.newListing,"category",e.target.value)}}}),s("label",{attrs:{for:"category"}},[t._v("Category")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12 m4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newListing.price,expression:"newListing.price"}],attrs:{id:"price",type:"text"},domProps:{value:t.newListing.price},on:{input:function(e){e.target.composing||t.$set(t.newListing,"price",e.target.value)}}}),s("label",{attrs:{for:"price"}},[t._v("Price USD")])]),s("div",{staticClass:"input-field col s12 m8"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newListing.description,expression:"newListing.description"}],staticClass:"materialize-textarea",attrs:{id:"description","data-length":"240"},domProps:{value:t.newListing.description},on:{input:function(e){e.target.composing||t.$set(t.newListing,"description",e.target.value)}}}),s("label",{attrs:{for:"description"}},[t._v("Item description")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"file-field input-field"},[s("p",[t._v("Select the file being sold. Please archive multiple-file uploads.")]),s("div",{staticClass:"btn grey darken-4 white-text"},[s("span",[t._v("File")]),s("input",{ref:"productFile",attrs:{type:"file",name:"productFile",id:"productFile"},on:{change:function(e){return t.handleProductFileUpload()}}})]),t._m(8)])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"file-field input-field"},[s("p",[t._v("Select up to four product images.")]),s("div",{staticClass:"btn grey darken-4 white-text"},[s("span",[t._v("File")]),s("input",{ref:"photoFiles",attrs:{type:"file",multiple:"",name:"photoFiles",id:"photoFiles"},on:{change:function(e){return t.handlePhotoFileUpload()}}})]),t._m(9)])])]),s("div",{staticClass:"row",domProps:{innerHTML:t._s(t.displayImageHTML)}})]),t._m(10)])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"tooltipped",attrs:{"data-position":"bottom","data-tooltip":"Resfresh data"}},[s("i",{staticClass:"material-icons black-text"},[t._v("refresh")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-spinner center-align",attrs:{id:"listed-spinner"}},[s("div",{staticClass:"spinner preloader-wrapper big active"},[s("div",{staticClass:"spinner-layer spinner-custom"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-spinner center-align",attrs:{id:"sale-spinner"}},[s("div",{staticClass:"spinner preloader-wrapper big active"},[s("div",{staticClass:"spinner-layer spinner-custom"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col s12"},[s("div",{staticClass:"card-panel light-blue white-text"},[s("div",{staticClass:"cardCount center-align"},[t._v(" Gross income "),s("p",{attrs:{id:"grossIncome"}},[t._v("$0 "),s("span",[t._v("0 ZANO")])]),s("div",{staticClass:"loading-spinner center-align",attrs:{id:"income-spinner"}},[s("div",{staticClass:"spinner preloader-wrapper big active"},[s("div",{staticClass:"spinner-layer spinner-custom"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col s12"},[s("a",{staticClass:"modal-trigger",attrs:{href:"#newListingModal"}},[s("div",{staticClass:"card-panel purple accent-2 white-text hoverable"},[s("div",{staticClass:"cardCount"},[t._v(" Create listing "),s("i",{staticClass:"material-icons"},[t._v("open_in_new")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row",staticStyle:{"margin-bottom":"-15px"}},[s("div",{staticClass:"col s12 m6"},[s("button",{staticClass:"waves-effect waves-dark btn grey lighten-4 black-text fullWidth"},[t._v("Sales")])]),s("div",{staticClass:"col s12 m6"},[s("button",{staticClass:"waves-effect waves-dark btn grey lighten-4 black-text fullWidth"},[t._v("Listings")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-spinner-listing center-align"},[s("div",{staticClass:"spinner preloader-wrapper big active"},[s("div",{staticClass:"spinner-layer spinner-custom"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"title"},[t._v("Create listing")]),s("p",[t._v("Listings incur a "),s("b",[t._v("$0.99")]),t._v(" fee. "),s("b",[t._v("1.5%")]),t._v(" of total cost per sale. It's that simple.")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-path-wrapper"},[s("input",{staticClass:"file-path",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"file-path-wrapper"},[s("input",{staticClass:"file-path",attrs:{type:"text"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn purple accent-2 waves-effect waves-light",attrs:{type:"submit",name:"action"}},[t._v("Submit "),s("i",{staticClass:"material-icons right"},[t._v("send")])])])}],n=(s("4160"),s("b64b"),s("159b"),s("96cf"),s("1da1")),r=s("48ac"),l=s.n(r),c=s("448d");window.$("#newListingModal").modal("open");var o={components:{Navigation:c["a"]},data:function(){return{user:{loggedIn:!1},newListing:{},confirmationText:"",listingCount:0,salesCount:0,productPhotos:[],productFile:[],displayImageHTML:""}},methods:{getUserDetails:function(){var t=localStorage.getItem("jwt");if(null!=t){var e=l.a.decode(t);this.user=e,this.user.loggedIn=!0,this.user.accountConfirmed?this.confirmationText="Good to go!":this.confirmationText="Not yet, check your email"}else this.user.loggedIn=!1},logUserOut:function(){localStorage.removeItem("jwt"),this.$router.go()},getListingsAndSales:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.$("#listingCount").css("display","none"),window.$("#saleCount").css("display","none"),window.$("#grossIncome").css("display","none"),window.$("#listed-spinner").css("display","block"),window.$("#sale-spinner").css("display","block"),window.$("#income-spinner").css("display","block"),e.prev=6,e.next=9,t.$http.post("/user/me/listings",{ownerAddress:t.user.paymentAddress});case 9:s=e.sent,self.count=0,t.listingCount=s.data.length,s.data.forEach((function(t){t.purchasers.forEach((function(){console.log("Sale found"),self.count++}))})),t.salesCount=self.count,window.$("#listingCount").css("display","block"),window.$("#saleCount").css("display","block"),window.$("#grossIncome").css("display","block"),window.$("#listed-spinner").css("display","none"),window.$("#sale-spinner").css("display","none"),window.$("#income-spinner").css("display","none"),e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](6),t.$swal("Error",e.t0,"error"),console.log(e.t0.response);case 26:case"end":return e.stop()}}),e,null,[[6,22]])})))()},handleProductFileUpload:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.newListing.productPhotos=[],t.productFile=t.$refs.productFile.files[0],s=new FormData,s.append("file",t.productFile),e.next=7,t.$http.post("/listing/product/upload",s,{headers:{"Content-Type":"multipart/form-data"}});case 7:i=e.sent,200==i.status&&(t.newListing.productFile=i.data.filename,console.log(t.newListing.productFile),t.$swal("Success!","Product file uploaded","success")),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),t.$swal("Oops!","File type must be: .jpg . jpeg .png","error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},handlePhotoFileUpload:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i,a,n,r,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,t.newListing.productPhotos=[],t.productPhotos=t.$refs.photoFiles.files,s=new FormData,i=0,a=Object.keys(t.productPhotos);i<a.length;i++)n=a[i],s.append("file",t.productPhotos[n]);return e.next=7,t.$http.post("/listing/photos/upload",s,{headers:{"Content-Type":"multipart/form-data"}});case 7:r=e.sent,l=t,200==r.status&&(c="",r.data.forEach((function(t){l.newListing.productPhotos.push(t.filename),c+='<div class="col s6 m3 uploadedImage"><i class="material-icons grey darken-4 white-text" style="position: relative; top: 35px; left: -10; margin: 0px; padding: 5px;">delete</i><img class="responsive-img" src="https://api.zano.life/uploads/'+t.filename+'" /></div>'})),console.log(t.newListing.productPhotos),t.$swal("Success!","Product file uploaded","success"),t.displayImageHTML=c),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),t.$swal("Oops!","File type must be: .jpg . jpeg .png, and limited to four photos","error");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},submitListing:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,window.$(".loading").toggle(),window.$(".loading-spinner-listing").toggle(),t.newListing.ownerAddress=t.user.paymentAddress,e.next=6,t.$http.post("/listing/save",t.newListing);case 6:s=e.sent,201==s.status&&(t.$swal("Listing created","Finalize by visiting your listings\n            page via Manage Account","success"),window.$(".loading").toggle(),window.$(".loading-spinner-listing").toggle(),window.$("#newListingModal").modal("close"),t.getListingsAndSales()),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),i=e.t0.response,409==i.status?(window.$(".loading").toggle(),window.$(".loading-spinner-listing").toggle(),t.$swal("Error",i.data.message,"error")):(window.$(".loading").toggle(),window.$(".loading-spinner-listing").toggle(),t.$swal("Error",i.data.err.message,"error"));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}},mounted:function(){this.getUserDetails(),this.getListingsAndSales(),window.$(document).ready((function(){window.$(".modal").modal(),window.$("input#description, textarea#description").characterCounter(),window.$(".tooltipped").tooltip(),window.$("input.autocomplete").autocomplete({data:{Apple:"https://placehold.it/250x250",Microsoft:"https://placehold.it/250x250",Google:"https://placehold.it/250x250"}})}))}},d=o,p=(s("43dd"),s("2877")),u=Object(p["a"])(d,i,a,!1,null,"23f0a009",null);e["default"]=u.exports},b64b:function(t,e,s){var i=s("23e7"),a=s("7b0b"),n=s("df75"),r=s("d039"),l=r((function(){n(1)}));i({target:"Object",stat:!0,forced:l},{keys:function(t){return n(a(t))}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-285ca21e.679f9989.js.map